# 🚀 Quick Start Guide for Contributors

## New to the Project?

Welcome! This guide will get you up and running quickly.

## Setup (5 minutes)

### 1. Clone and Install
```bash
git clone https://github.com/FTC-24180/Autofig.git
cd Autofig
npm install
```

### 2. Start Development Server
```bash
npm run dev
```

Open http://localhost:5173 in your browser. Changes auto-reload!

---

## Making Changes

### 1. Create Your Changes
Edit files in `src/` directory. The app will hot-reload automatically.

### 2. Commit with Semantic Messages

**Important**: Use conventional commit messages for automatic versioning!

```bash
# Bug fix → Version 1.0.0 → 1.0.1
git commit -m "fix: resolve QR scanning crash"

# New feature → Version 1.0.0 → 1.1.0
git commit -m "feat: add match export feature"

# Breaking change → Version 1.0.0 → 2.0.0
git commit -m "feat!: redesign storage system"
```

**Need more examples?** See [VERSIONING.md](VERSIONING.md) for comprehensive guide.

**Commit template helper:**
```bash
git config commit.template .gitmessage
```

#### Working with GitHub Copilot PRs

When GitHub Copilot creates a PR for you:

1. **Review the Copilot-generated PR** on GitHub
2. **When merging, use semantic commit messages**:
   - Click **"Squash and merge"** (recommended)
   - Edit the commit title to use semantic format:
     ```
     feat: implement QR scanner improvements
     ```
3. **Merge to main** - this triggers Release Please
4. **Check for Release Please PR** - appears as "chore(main): release X.X.X"

**Example Merge Message:**
```
feat: add QR code validation feature

Implement input validation, improve error messages,
and add unit tests for validation logic.

Co-authored-by: GitHub Copilot <copilot@github.com>
```

### 3. Push Your Changes
```bash
git push origin main
```

### 4. Review the Release PR

Release Please will automatically:
- ✅ Create or update a release PR
- ✅ Calculate the new version
- ✅ Update CHANGELOG.md
- ✅ Wait for your review

**Check GitHub PRs** for: "chore(main): release X.X.X"

### 5. Merge When Ready

- **Don't merge immediately!** Let changes accumulate
- Review the PR to see all changes since last release
- Edit CHANGELOG.md if needed
- **Merge the PR** when you're ready to deploy

Deployment happens automatically after merging!

---

## Release Control

### Accumulating Changes

Release Please is smart about multiple commits:

```bash
# Monday
git commit -m "feat: add feature A"
git push  # Creates release PR

# Tuesday
git commit -m "feat: add feature B"
git push  # Updates same PR

# Wednesday
git commit -m "fix: bug fix"
git push  # PR still open

# Thursday - Ready!
# Merge the PR → All changes release together
```

### Emergency Release

```bash
# Push urgent fix
git commit -m "fix: critical security patch"
git push

# Release PR created/updated
# Merge immediately for fast deployment
```

---

## Common Tasks

### Check if Your Code Builds
```bash
npm run build
```

### Test the Production Build Locally
```bash
npm run preview
```

### Run Linter
```bash
npm run lint
```

---

## Project Structure

```
src/
├── components/     # React UI components
│   ├── common/    # Reusable components (forms, modals)
│   ├── config/    # Configuration management UI
│   ├── menu/      # Hamburger menu sections
│   └── steps/     # Wizard step screens
├── hooks/          # Custom React hooks
│   ├── useMatches.js         # Match CRUD operations
│   ├── useActionGroups.js    # Action management
│   ├── useServiceWorker.js   # PWA updates
│   └── ...
└── utils/          # Helper functions
    ├── terseEncoder.js       # QR code encoding
    ├── storageUtils.js       # LocalStorage wrapper
    └── ...

public/
├── version.js      # Auto-replaced by CI/CD
├── sw.js           # Service worker
└── manifest.json   # PWA manifest

.github/workflows/
├── release-please.yml  # Creates release PRs
└── deploy.yml          # Deploys on release
```

**Key Files**:
- **`package.json`**: Single source of truth for version
- **`CHANGELOG.md`**: Auto-generated by Release Please
- **`public/version.js`**: Shows `0.0.0-dev` locally, real version in production
- **`.gitmessage`**: Commit message template (optional)

---

## Deployment

### How It Works

1. You push commits with semantic messages (`feat:`, `fix:`)
2. Release Please creates/updates a PR with version bump
3. You review and merge the PR when ready
4. GitHub Actions automatically:
   - Creates a GitHub Release
   - Builds the app (injects version from `package.json`)
   - Deploys to GitHub Pages

**Time from merge to live**: ~2-3 minutes

### Deployment Environments

**Production**:
- URL: https://Autofig.bluebananas.org
- Deploy trigger: Merge release PR

**Local Development**:
- URL: http://localhost:5173
- Version shown: `0.0.0-dev`
- Hot reload: Enabled

**Preview Production Build**:
```bash
npm run build
npm run preview
# Opens at http://localhost:4173
```

### Check Deployment Status

1. **Watch Actions**: https://github.com/FTC-24180/Autofig/actions
2. **Check Releases**: https://github.com/FTC-24180/Autofig/releases
3. **Verify Live**: Open app → Help & Info → Check version

### Manual Deployment (Rare)

If you need to deploy without a release:

1. Go to: https://github.com/FTC-24180/Autofig/actions/workflows/deploy.yml
2. Click **"Run workflow"**
3. This deploys current `main` branch immediately

---

## Auto-Update System

The app automatically notifies users when a new version is deployed:

1. New version deployed → Service worker detects it
2. User returns to app → "Update Available" banner appears
3. User clicks "Update Now" → App reloads with new version
4. All data preserved (matches, templates, settings)

**No manual cache clearing or hard refresh needed!**

Implementation: See `src/hooks/useServiceWorker.js`

---

## PWA Installation

Once deployed, users can install the app:

- **iOS**: Safari → Share → Add to Home Screen
- **Android**: Chrome → Menu → Install App
- **Desktop**: Chrome → Address bar → Install icon

---

## Tips

✅ **DO**:
- Use semantic commit messages (`feat:`, `fix:`, etc.)
- Test your changes locally before pushing
- Keep commits focused and atomic
- Review release PRs before merging
- Accumulate related changes into one release

❌ **DON'T**:
- Manually edit version numbers in `package.json`
- Edit `CHANGELOG.md` directly (Release Please manages it)
- Use vague commit messages like "update"
- Commit broken code to main
- Merge release PRs without reviewing

---

## Troubleshooting

### Release PR not created
- Check commit messages use semantic format (`feat:`, `fix:`)
- Verify you didn't only use `chore:`, `docs:`, or `style:` (these don't trigger releases)
- Check GitHub Actions logs for errors

### Deployment failed
- Check Actions tab: https://github.com/FTC-24180/Autofig/actions
- Common issues:
  - Node.js version mismatch (need 20.19+ or 22.12+)
  - npm install failures
  - Build errors (run `npm run lint` locally)

### Wrong version showing in app
- Version comes from last successful deployment
- Trigger manual deployment if needed
- Clear browser cache and reload

### Service worker not updating
- Hard refresh: `Ctrl+Shift+R` (Windows/Linux) or `Cmd+Shift+R` (Mac)
- Clear site data: DevTools → Application → Clear storage

**More help?** See [VERSIONING.md](VERSIONING.md) for detailed troubleshooting.

---

## Need Help?

- **Detailed versioning guide**: [VERSIONING.md](VERSIONING.md)
- **User documentation**: [README.md](README.md)
- **Report issues**: https://github.com/FTC-24180/Autofig/issues

---

## Release Flow

```
Your commits → Push to main
    ↓
Release Please creates/updates PR
    ↓
You review the PR
    ↓
You merge when ready
    ↓
GitHub Release created
    ↓
Build & Deploy to GitHub Pages
    ↓
Live on web! 🎉
```

**Why this workflow?**
- ✅ You control timing (merge PR when ready)
- ✅ Review first (see exactly what's releasing)
- ✅ Combine changes (multiple commits in one release)
- ✅ Edit notes (improve changelog before release)
- ✅ No surprises (WIP commits won't trigger releases)

Read more: [VERSIONING.md](VERSIONING.md#why-release-please)

---

Happy coding! 🚀